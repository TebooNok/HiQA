# pga305

# 1. Power Management
Internal Oscillator Diagnostics Third-Order TC and Third-Order NL Sensor Compensation GAIN PWR (3.3 V ± 30 V) OWI OUT MUX Ratiometric Bridge Excitation 24 ADC -Bit 24 ADC -Bit 14 DAC -Bit PGA PGA Control and Status Registers EEPROM BRG+ BRG± INP+ INP± INT+ INT± Optional External Temperature Sensor Bridge Sensor Temperature Sensing AFE Resistive Sensing AFE Reference Internal Temperature Sensor I2C SCL SDA I2CADDR 适 适用 用于 于压 压力 力传 传感 感器 器的 的 PGA305 信 信号 号调 调节 节器 器和 和发 发送 送器 器

# 2. 特性
模拟 特性 – 适用于阻性桥式传感器的模拟前端 – 传感器灵敏度可调节范围：1mV/V 至 135mV/V – 片上温度传感器 – 可编程增益 – 适用于信号通道的 24 位 Σ-Δ 模数转换器 – 适用于温度通道的 24 位 Σ-Δ 模数转换器 – 14 位输出数模转换器 (DAC) • 数字 特性 – 整个温度范围内的 FSO 精度 < 0.1% – 系统响应时间 < 220µs – 三阶偏移、增益和非线性温度补偿 – 诊断功能 – 集成 EEPROM 用于存储器件操作、校准数据和 用户数据 • 外设 特性 – 可通过 I2C 接口实现数据读取和器件配置 – 单线接口，可通过电源引脚进行通信，无需额外 使用线路 – 4mA 至 20mA 电流回路接口 – 比例电压输出和绝对电压输出 – 电源管理控制 – 模拟低压检测 • 通用 特性 – 工业温度范围：–40°C 至 150°C – 电源： – 片上电源管理，支持 3.3V 至 30V 的宽电源 电压范围 – 集成反向保护电路

# 3. 应用
压力传感发送器和变送器 液位计、流量计 电阻场发射器

# 4. 说明
PGA305 器件提供了一个适用于压阻式和应力计式压 感元件的接口。该器件是一套完整的片上系统 (SoC) 解决方案，具有可编程模拟前端 (AFE)、ADC 和数字 信号处理功能，可直接连接传感元件。此外，PGA305 器件还集成了稳压器和振荡器，最大程度地减少了外部 组件数。PGA305 器件可以采用三阶温度和非线性补 偿来实现高精度。该器件还可以使用集成 I2C 接口或单 线制串行接口 (OWI) 来实现外部通信并简化系统校准 流程。集成 DAC 支持绝对电压、比例电压以及 4mA 至 20mA 的电流回路输出。

# 5. 器件信息
---table begin---
Table tile: 器件信息
| 器件型号 | 封装 | 封装尺寸（标称值） |
|---|---|---|
| PAG305 | VQFN (36) | 6.00mm x 6.00mm |
---table end---
(1) 如需了解所有可用封装，请参阅数据表末尾的可订购产品附 录。

# 6. PAG305 简化方框图
36 SCL 10 GND 1 NU 27 NU 35 NU 11 FB± 2 DVDD_MEM 26 NU 34 NU 12 FB+ 3 DVDD 25 NU 33 SDA 13 COMP 4 NU 24 NU 32 DVSS 14 BRG± 5 PWR 23 AVSS 31 NU 15 BRG+ 6 DACCAP 22 INT± 30 NU 16 REFCAP 7 NU 21 INT+ 29 I2CADDR 17 INP± 8 OUT 20 NU 28 NU 18 INP+ 9 AVDD 19 NU Not to scale Thermal Pad 3 5 Pin Configuration and Functions RHH Package 36-Pin VQFN With Thermal Pad Top View NU = Make no external connection.

# 7. Pin Configuration and Functions
---table begin---
Table tile: Pin Configuration and Functions
| PIN NAME | NO. | I/O | DESCRIPTION |
|---|---|---|---|
| AVDD | 9 | O | AVDD regulator output. |
| AVSS | 23 | — | Analog ground. |
| BRG+ | 15 | O | Bridge drive, positive. |
| BRG– | 14 | O | Bridge drive, negative. |
| COMP | 13 | I | Output amplifier compensation. |
| DACCAP | 6 | O | DAC capacitor. |
| DVDD | 3 | O | DVDD regulator output. |
| DVDD_MEM | 2 | O | Power supply for EEPROM and OTP. |
| DVSS | 32 | — | Digital ground. |
| FB+ | 12 | I | Feedback, positive. |
| FB– | 11 | I | Feedback, negative. |
| GND | 10 | — | Ground. |
| I2CADDR | 29 | I | I2C chip address select. |
| INP+ | 18 | I | Resistive sensor positive input. |
| INP– | 17 | I | Resistive sensor negative input. |
| INT+ | 21 | I | External temperature sensor positive input. |
| INT– | 22 | I | External temperature sensor negative input. |
| NU | 1, 4, 7, 19, 20, 24 to 28, 30, 31, 34, 35 | — | Do not connect. |
| OUT | 8 | O | DAC gained output. |
| PWR | 5 | I | Input power supply. |
| REFCAP | 16 | O | ADC reference capacitor. |
| SCL | 36 | I/O | I2C clock. |
| SDA | 33 | I/O | I2C data. |
| Thermal pad | — | — | Connect to analog ground. |
---table end---

# 8. Absolute Maximum Ratings
(1) Stresses beyond those listed under Absolute Maximum Ratings may cause permanent damage to the device. These are stress ratings only, which do not imply functional operation of the device at these or any other conditions beyond those indicated under Recommended Operating Conditions. Exposure to absolute-maximum-rated conditions for extended periods may affect device reliability.

# 9. Specifications
---table begin---
Table tile: Absolute Maximum Ratings
| MIN | MAX | UNIT |
|---|---|---|
| –28 | 33 | V |
| –0.3 | 2| V |
---table end---
PWR Supply voltage Voltage at sensor input pins: INP+, INP–, INT+, INT– Voltage at AVDD, AVSS, BR# 6. Specifications
Stresses beyond those listed under Absolute Maximum Ratings may cause permanent damage to the device. These are stress ratings only, which do not imply functional operation of the device at these or any other conditions beyond those indicated under Recommended Operating Conditions. Exposure to absolute-maximum-rated conditions for extended periods may affect device reliability.

# 6.1. Absolute Maximum Ratings
---table begin---
Table tile: Absolute Maximum Ratings
| MIN | MAX | UNIT |
|---|---|---|
| PWR Supply voltage | –28 | 33 | V |
| Voltage at sensor input pins: INP+, INP–, INT+, INT– | –0.3 | 2| V |
| Voltage at AVDD, AVSS, BRG+, BRG–, COMP, DACCAP, DVDD, DVDD_MEM, DVSS, FB–, GATE, REFCAP, SCL, SDA, I2CADDR | –0.3 | 3.6 | V |
| Voltage at FB+ pin | –2 | VPWR + 0.3 | V |
| Voltage at OUT pin | –0.3 | 33 | V |
| IPWR, short on OUT pin Supply current | 25 | mA |
| TJmax Maximum junction temperature | 155 | °C |
| Tstg Storage temperature |–40 | 150 | °C |
---table end---
Notes:
JEDEC document JEP155 states that 500-V HBM allows safe manufacturing with a standard ESD control process.
JEDEC document JEP157 states that 250-V CDM allows safe manufacturing with a standard ESD control process.

# 6.2. ESD Ratings
---table begin---
Table tile: ESD Ratings
| VALUE | UNIT |
|---|---|
| V(ESD) Electrostatic discharge Human-body model (HBM), per ANSI/ESDA/JEDEC JS-001(1) | ±2000 | V |
| Charged-device model (CDM), per JEDEC specification JESD22-C101(2) |±500 |
---table end---
Notes:
Programming of the EEPROM results in an additional 6 mA of current on the PWR pin.

# 6.3. Recommended Operating Conditions
# 6.7 Electrical Characteristics – Internal Reference
---
---table begin---
Table tile: Electrical Characteristics – Internal Reference
| PARAMETER | TEST CONDITIONS | MIN | TYP | MAX | UNIT |
|---|---|---|---|---|---|
| High-voltage reference voltage(1) | - | - | 1.2 | - | V |
| Accurate reference voltage | - | - | 2.5 | - | V |
| Capacitor value on REFCAP pin | - | 100 | - | - | nF |
---table end---
# 6.3. Recommended Operating Conditions

# 6.8 Electrical Characteristics – Bridge Sensor Supply
---
---table begin---
Table tile: Electrical Characteristics – Bridge Sensor Supply
| PARAMETER | TEST CONDITIONS | MIN | TYP | MAX | UNIT |
|---|---|---|---|---|---|
| VBRG+ – VBRG– Bridge supply voltage | Bridge supply control bit = 0b00, no load | - | 2.5 | - | V |
| Bridge supply control bit = 0b01, no load | - | 2 | - | - | V |
| Bridge supply control bit = 0b10, no load | - | 1.25 | - | - | V |
| IBRG Current supply to the bridge | - | 1.5 | - | - | mA |
| CBRG Capacitive load RBRG = 20 kΩ | - | 2 | - | - | nF |
---table end---

# 6.9 Electrical Characteristics – Temperature Sensor Supply
---
---table begin---
Table tile: Electrical Characteristics – Temperature Sensor Supply
| PARAMETER | TEST CONDITIONS | MIN | TYP | MAX | UNIT |
|---|---|---|---|---|---|
| ITEMP Current supply to temperature sensor | Control bit = 0b000 | 25 | - | - | µA |
| Control bit = 0b001 | - | 50 | - | - | µA |
| Control bit = 0b010 | - | 100 | - | - | µA |
| Control bit = 0b011 | - | 500 | - | - | µA |
| Control bit = 0b1xx | - | OFF | - | - |  |
| CTEMP Capacitive load | - | 100 | - | - | nF |
| Output impedance | - | 15 | - | - | MΩ |
---table end---

# 6.10 Electrical Characteristics – Internal Temperature Sensor
---
---table begin---
Table tile: Electrical Characteristics – Internal Temperature Sensor
| PARAMETER | TEST CONDITIONS  | MIN | TYP | MAX | UNIT |
|---|---|---|---|---|---|
| Temperature range | - | -40 | - | 150 | °C |
---table end---

# 6.11 Electrical Characteristics – P Gain (Chopper Stabilized)
---
---table begin---
Table tile: Electrical Characteristics – P Gain (Chopper Stabilized)
| PARAMETER | TEST CONDITIONS | MIN | TYP | MAX | UNIT |
|---|---|---|---|---|---|
| Gain steps (5 bits) | 00000, at dc | 5 | - | - | V/V |
| 00001 | - | 5.48 | - | - | V/V |
........Rest of entries........
| 11110 | - | 200 | - | - | V/V |
| 11111 | - | 400 | - | - | V/V |
---table end---

# 6.12 Electrical Characteristics – P Analog-to-Digital Converter
---
---table begin---
Table tile: Electrical Characteristics – P Analog-to-Digital Converter
| PARAMETER | TEST CONDITIONS | MIN | TYP | MAX | UNIT |
|---|---|---|---|---|---|
| Sigma-delta modulator frequency | - | 1 | - |- | MHz |
........Rest of entries........
---table end---

# 6.13 Electrical Characteristics – T Gain (Chopper Stabilized)
# 6.13 Electrical Characteristics – T Gain (Chopper Stabilized)
---
---table begin---
Table tile: Electrical Characteristics – T Gain (Chopper Stabilized)
| PARAMETER | TEST CONDITIONS | MIN | TYP | MAX | UNIT |
|---|---|---|---|---|---|
| Gain steps (2 bits) | Gain control bits = 0b00 at dc | 1.33 | - | - | V/V |
| - | Gain control bits = 0b01 | 2 | - | - | - |
| - | Gain control bits = 0b10 | 5 | - | - | - |
| - | Gain control bits = 0b11 | 20 | - | - | - |
| Gain bandwidth product | - | 350 | - | - | kHz |
| Noise density(1) | f = 0.1 Hz to 100 Hz at gain = 5 V/V, across temperature | 110 | - | - | nV/√Hz |
| Input offset voltage | - | 95 | - | - | µV |
| Input bias current | - | 5 | - | - | nA |
| Frequency response | Gain = 20 V/V, <100 Hz | 0.335 | - | - | %V/V |
| Common mode voltage range | Depends on selected gain and current supply(2) | - | - | - | - |
| Common-mode rejection ratio | fCM = 50 Hz | 110 | - | - | dB |
| Input impedance | - | 1 | - | - | MΩ |
---table end---
# 6.13 Electrical Characteristics – T Gain (Chopper Stabilized)

# 6.14 Electrical Characteristics – T Analog-to-Digital Converter
---
---table begin---
Table tile: Electrical Characteristics – T Analog-to-Digital Converter
| PARAMETER | TEST CONDITIONS | MIN | TYP | MAX | UNIT |
|---|---|---|---|---|---|
| Sigma-delta modulator frequency | - | 1 | - | - | MHz |
| ADC voltage input range | - | -2.5 | - | 2.5 | V |
| Number of bits | - | 24 | - | - | bits |
| ADC 2s complement code for –2.5-V differential input | 2s complement | 800000hex | - | - | LSB |
| ADC 2s complement code for 0-V differential input | - | 000000hex | - | - | LSB |
| ADC 2s complement code for 2.5-V differential input | - | 7FFFFFhex | - | - | LSB |
| INL | Integral nonlinearity | ±0.5 | - | - | LSB |
---table end---

# 6.15 Electrical Characteristics – One-Wire Interface
I've stop here for now. Please, let me know if you need further assistance.# 6.19 Electrical Characteristics – Non-Volatile Memory
---table begin---
Table tile: Electrical Characteristics – Non-Volatile Memory
| PARAMETER | TEST CONDITIONS | MIN | TYP | MAX | UNIT |
|---|---|---|---|---|---|
| EEPROM Size | - | 128 | - | - | bytes |
| Erase-write cycles | - |  1000 | - | - | cycles |
| Programming time | 1 8-byte page | 8 | - | - | ms |
| Data retention | - | 10 | - | - | years |
---table end---
# 6.15 Electrical Characteristics – One-Wire Interface

# 6.20 Electrical Characteristics – Diagnostics
---table begin---
Table title: Electrical Characteristics - Diagnostics
| PARAMETER | TEST CONDITIONS | MIN | TYP | MAX | UNIT |
|---|---|---|---|---|---|
| OSC_PWR_OV | Oscillator circuit supply overvoltage threshold | - | - | 3.3 | V |
| OSC_PWR_UV | Oscillator circuit supply undervoltage threshold | - | - | 2.7 | V |
| BRG_OV | Resistive bridge sensor supply overvoltage threshold | - | - | 10 | %VBRG |
| BRG_UV | Resistive bridge sensor supply undervoltage threshold | - | - | -10 | %Prog. VBRG |
| AVDD_OV | AVDD overvoltage threshold | - | - | 3.3 | V |
| AVDD_UV | AVDD undervoltage threshold | - | - | 2.7 | V |
| DVDD_OV | DVDD overvoltage threshold | - | - | 2 | V |
| DVDD_UV | DVDD undervoltage threshold | - | - | 1.53 | V |
| REF_OV | Reference overvoltage threshold | - | - | 2.75 | V |
---table end---

# 6.21 Operating Characteristics
---table begin---
Table title: Operating Characteristics
| PARAMETER | TEST CONDITIONS | MIN | TYP | MAX | UNIT |
|---|---|---|---|---|---|
| Start-up time(1) | No IIR filter, Vout step 0 to 2.5 V | - | 9.6 | - | ms |
| Start-up time(2) | IIR filter = 320Hz, Vout step 0 to 2.5 V | - |10.8 | - | ms |
| Output rate | - | - | 512 | - | µs |
| Response time(3) | No IIR filter, Vout step 0 to 2.5 V | - |1700 | - | µs |
---table end---

# 12 Operating Characteristics (continued)
---table begin---
Table title: Operating Characteristics (continued)
| PARAMETER | TEST CONDITIONS | MIN | TYP | MAX | UNIT |
|---|---|---|---|---|---|
| Start-up time(4) | Time to reach valid output, including settling time. | - | - | - | - |
| Temperature Testing(5) | Sense element held at constant temperature while the PGA305 device was calibrated at –25ºC, 25ºC, 85ºC and 125ºC | - | - | - | - |
---table end---# e(1)
No IIR filter, Vout step 0 to 2.5 V, 9.6ms
Start-up time(2)
IIR filter = 320Hz, Vout step 0 to 2.5 V, 10.8ms
Output rate 512 µs
Response time(3)
No IIR filter, Vout step 0 to 2.5 V, 1700µs

# 12. Operating Characteristics (continued)
Over operating ambient temperature range (unless otherwise noted). Start-up time and response time testing performed in 0-5V absolute voltage mode.
---table begin---
Table title: Operating Characteristics (continued)
| PARAMETER | TEST CONDITIONS | MIN | TYP | MAX | UNIT |
|---|---|---|---|---|---|
| Response time(4) | IIR filter = 320Hz, Vout step 0 to 2.5 V | - | - | 2680 | µs |
| Absolute-voltage mode, overall accuracy (PGA305 only, no sense element)(5) | 3 pressure - 1 temperature calibration, overall accuracy calculated using points different from points used for calibration | - | 0.13 | 0.08 | %FSO |
---table end---

# 13. I C Interface Timing Requirements
---table begin---
Table title: I C Interface Timing Requirements
| PARAMETER | MIN | TYP | MAX | UNIT |
|---|---|---|---|---|
| tSTASU (START condition set-up time) | - | 500 | - | ns |
| tSTAHD (START condition hold time) | - | 500 | - | ns |
| tLOW (SCL low time) | - | 1.25 | - | µs |
| tHIGH (SCL high time) | - | 1.25 | - | µs |
| tRISE (SCL and SDA rise time) | - | 7 | - | ns |
| tFALL (SCL and SDA fall time) | - | 7 | - | ns |
| tDATSU (Data setup time) | - | 500 | - | ns |
| tDATHD (Data hold time) | - | 500 | - | ns |
| tSTOSU (STOP condition set-up time) | - | 500 | - | ns |
---table end---

# 14. 6.24 Typical Characteristics
Figure 2. Temperature Sensor Code vs Temperature

# 15. 7 Detailed Description
7.1 Overview
The PGA305 device can be used in a variety of applications. The most common ones are for pressure and temperature measurement. Depending on the application, the device itself can be configured in different modes. These sections give information regarding these configurations.
The PGA305 device is a high-accuracy, low-drift, low-noise, low-power, and easily programmable signal-conditioner device for resistive-bridge pressure and temperature-sensing applications.# 16. 7.2 Device Description
The PGA305 device is a high-accuracy, low-drift, low-noise, low-power, and easily programmable signal-conditioner device for resistive-bridge pressure and temperature-sensing applications. The PGA305 device implements a third-order temperature coefficient (TC) and nonlinearity (NL) algorithm to linearize the analog output. The PGA305 device accommodates various sensing element types, such as piezoresistive, ceramic film, and steel membrane. It supports the sensing element spans from 1 mV/V to 135 mV/V. The typical applications supported are pressure sensor transmitters, transducers, liquid-level meters, flow meters, strain gauges, weight scales, thermocouples, thermistors, two-wire resistance thermometers (RTD), and resistive field transmitters. The device can also be used in accelerometer and humidity sensor signal-conditioning applications.

# 17. 7.2.1 Technical Specifications
The PGA305 device provides bridge excitation voltages of 2.5 V, 2 V, and 1.25 V, all ratiometric to the ADC reference level. The PGA305 device has the unique one-wire interface (OWI) that supports communication and configuration through the power-supply line during the calibration process. This feature minimizes the number of wires necessary for an application.
The PGA305 device contains two separated analog front-end (AFE) chains for resistive-bridge inputs and temperature-sensing inputs. Each AFE chain has its own gain amplifier and a 16-bit ADC at a 7.8-kHz output rate. The resistive-bridge input AFE chain consists of a programmable gain with 32 steps from 5 V/V to 400 V/V. For the temperature-sensing AFE input chain, the PGA305 device provides a current source that can supply up to 500 µA for optional external temperature sensing. This current source can also be used as constant-current bridge excitation. The programmable gain in the temperature-sensing chain has four steps from 1.33 V/V to 20 V/V. In addition, the PGA305 device integrates an internal temperature sensor that can be configured as the input of the temperature-sensing AFE chain.
A 128-byte EEPROM is integrated in the PGA305 device to store the calibration coefficients and the PGA305 configuration settings as needed. The PGA305 device has an integrated I2C interface used for data capture and also for device configuration. In addition, 14-bit DAC followed by a buffer gain stage of 2 V/V to 10 V/V. The device supports industrial-standard ratiometric-voltage output, absolute-voltage output, and 4-mA to 20-mA current loop.
The diagnostic function monitors the operating condition of the PGA305 device. The device can operate with a 3.3-V to 30-V power supply directly without using an external LDO. The PGA305 device has a wide ambient-temperature operating range from –40°C to 150°C. The package form is 6-mm × 6-mm, 36-pin VQFN. In this small package size, the PGA305 device has integrated all the functions necessary for resistive-bridge sensing applications to minimize the PCB area and simplify the overall application design.# 7.2. Functional Block Diagram
Third-Order TC and Third-Order NL Sensor Compensation, Linear Regulators, Diagnostics, VDD, EEPROM (Calibration Coefficients, Serial No.), FB+, OWI Driver, tx, rx, GND, REFCAP, AVDD, OWI, DAC, AVDD Regulator, DVDD Regulator, FB±, DVSS, AVSS, P, Delta Modulator, Sigma-P Decimation Filter, P ADC, INP+, INP±, vP, P Gain (5 Bits), vdd, vdd, +, ±, Accurate Reference (2.5 V, 10 ppm/°C), OUT, DACCAP, COMP, DVDD, DVDD_MEM, req, Sensor Voltage Supply, BRG+, Bridge Drive, BRG±, REF, REF, REF, AVDD, vP, vT, T ADC, REF, vT, IIR, Second- Order Filter, Digital Compensation, Channel Select, MUX, INT±, INT+, Internal Temperature, vtint, vdd, T Delta Modulator, Sigma-T Decimation Filter, T Gain (2 Bits), DAC Gain (2 Bits), 14bit, I2C, I2CADDR, SCL, SDA, 24bit, 16.

# 7.3. Feature Description
This section describes individual functional blocks of the PGA305 device.

# 7.3.1. Reverse-Voltage Protection Block
The PGA305 device includes a reverse-voltage protection block. This block protects the device from reverse- battery conditions on the external power supply.

# 7.3.2. Linear Regulators
The PGA305 device has two main linear regulators: an AVDD regulator and a DVDD regulator. The AVDD regulator supplies the 3-V voltage source for internal analog circuitry, while the DVDD regulator supplies the 1.8- V regulated voltage for the digital circuitry. The user must connect bypass capacitors of 100 nF each to the AVDD and DVDD pins of the device.

# 7.3.3. Internal Reference
The PGA305 device has two internal references. These references are given in these subsections.

# 7.3.3.1. High-Voltage Reference
The high-voltage reference is an inaccurate reference used in the diagnostic thresholds.

# 7.3.3.2. Accurate Reference
The accurate reference is used to generate reference voltage for the P ADC, T ADC and DAC. TI recommends to place a 100-nF capacitor on the REFCAP pin to limit the bandwidth of reference noise.
The user can set the ADC_EN_VREF bit in the ALPWR register to 0 to disable the accurate reference buffer. This allows the user to connect an external single-ended reference voltage to the REFCAP pin and then supply the reference voltage to the ADCs and the DAC. Note that the default power-up state of ADC_EN_VREF is such that the reference buffer is disabled.
NOTE: The accurate reference is valid 50 µs after the digital core starts running at power up.

# 7.3.4. BRG+ to BRG– Supply for the Resistive Bridge
The sensor voltage-supply block of the PGA305 device supplies power to the resistive-bridge sensor. Use the BRG_CTRL bits in the BRG_CTRL register to configure the sensor supply in the PGA305 device to a 2.5-V, 2-V, or 1.25-V nominal output supply. These three output supply options can accommodate bridge sense elements with different resistor values. This nominal supply is ratiometric to the accurate reference as shown in Figure 3.
---table begin---
Table title: Supply and P ADC Reference Comparison
| Supply Type | Voltage Difference |
|---|---|
| 2.5 V | 2.5 V|
| 2 V | 2 V|
| 1.25 V | 1.25 V|
---table end---# 7.3.5 ITEMP Supply for the Temperature Sensor
The ITEMP block in PGA305 device supplies programmable current to an external temperature sensor, such as an RTD temperature probe or NTC or PTC thermistor. The temperature-sensor current source is ratiometric to the accurate reference. Use the ITEMP_CTRL bits in the TEMP_CTRL register to program the value of the current.

# 7.3.6 Internal Temperature Sensor
PGA305 device includes an internal temperature sensor whose voltage output is digitized by the T ADC and made available to the microprocessor. This digitized value is used to implement temperature compensation algorithms in software. Note that the voltage generated by the internal temperature sensor is proportional to the junction temperature.

# 7.3.7 P Gain
P gain is designed with precision, low-drift, low-flicker-noise, chopper-stabilized amplifiers. P gain is implemented as an instrument amplifier as shown in Figure 5. The user can use five bits in the P_GAIN_SELECT register to adjust the gain of this stage to accommodate sense elements with a wide range of signal spans.

# 7.3.8 P Analog-to-Digital Converter
The P analog-to-digital converter digitizes the voltage output of the P-gain amplifier.

# 7.3.8.1 P Sigma-Delta Modulator for P ADC
The sigma-delta modulator for P ADC is a 1-MHz, second-order, 3-bit quantizing sigma-delta modulator.

# 7.3.8.2 P Decimation Filter for P ADC
The pressure signal path internal conversion time is 128 µs.
---table begin---
Table 1. Input Voltage to Output Counts for the P ADC
| SIGMA-DELTA MODULATOR DIFFERENTIAL INPUT VOLTAGE (V) | 24-BIT NOISE-FREE DECIMATOR OUTPUT |
|---|---|
| –2.5 | –8 388 608 (0x800000) |
| –1.25 |–4 194 304 (0xC00000) |
| 0 | 0 (0x000000)|
| 1.25 | 4 194 303 (0x3FFFFF) |
| 2.5 | 8 388 607 (0x7FFFFF) |
---table end---

# 7.3.9 T Gain
The device has the ability to perform temperature compensation through an internal or external temperature sensor. The user can select the source of the temperature measurement with the TEMP_MUX_CTRL bits in TEMP_CTRL register. Note that the device connects to an external temperature sensor through the INT+ and INT– pins.
The T gain block is constructed with a low-flicker-noise, low-offset, chopper-stabilized amplifier. The gain is configurable with two bits in the T_GAIN_SELECT register. The T-gain amplifier can be configured for single-ended# 7.3.9 T Gain
The device has the ability to perform temperature compensation through an internal or external temperature sensor. The user can select the source of the temperature measurement with the TEMP_MUX_CTRL bits in TEMP_CTRL register. Note that the device connects to an external temperature sensor through the INT+ and INT– pins.
The T gain block is constructed with a low-flicker-noise, low-offset, chopper-stabilized amplifier. The gain is configurable with two bits in the T_GAIN_SELECT register. The T-gain amplifier can be configured for single-ended or differential operation using the TSEM_N bit in the AMUX_CTRL register. Note that when the T-gain amplifier is set up for single-ended operation, the differential voltage converted by the T ADC is with respect to ground.
---table begin---
Table tile: T-Gain Configuration
| TEMPERATURE SOURCE | T GAIN CONFIGURATION |
|---|---|
| Internal temperature sensor | Single-ended |
| External temperature sensor with one terminal of the sensor connected to ground | Single-ended |
| External temperature sensor with neither terminal of the sensor connected to ground | Differential |
---table end---

# 7.3.10 T Analog-to-Digital Converter
The T analog-to-digital converter is for digitizing the T-gain amplifier output. The digitized value is available in the TADC_DATA2 and TADC_DATA3 registers.

# 7.3.10.1 T Sigma-Delta Modulator for T ADC
The sigma-delta modulator for T ADC is a 1-MHz, second-order, 3-bit quantizing sigma-delta modulator.

# 7.3.10.2 T Decimation Filters for T ADC
The temperature signal path contains a decimation filter with an internal output rate of 128 µs. 
The output of the decimation filter in the temperature signal path is 24-bit signed value.
---table begin---
Table tile: Input Voltage to Output Counts for T ADC
| SIGMA-DELTA MODULATOR | DIFFERENTIAL INPUT VOLTAGE | 24-BIT NOISE-FREE DECIMATOR OUTPUT |
|---|---|---|
| –2.5 V | –8 388 608 (0x800000) |
| –1.25 V | –4 194 304 (0xC00000) |
| 0 V | 0 (0x000000) |
| 1.25 V | 4 194 303 (0x3FFFFF) |
| 2.5 V | 8 388 607 (0x7FFFFF) |
---table end---

# 7.3.11 P GAIN and T GAIN Calibration
The P_GAIN value should be set based on the maximum bridge output voltage. The maximum bridge voltage is the maximum sum of bridge offset and bridge span across the entire operating temperature range.
The T GAIN value should be set based on the temperature sense element. The specific values to be used are:
- For the internal temperature sensor, set T_GAIN to 5 V/V gain.
- For an external temperature sensor such as a PTC thermistor, set T_GAIN to 20 V/V gain.

# 7.3.12 One-Wire Interface (OWI)
The device includes an OWI digital communication interface. The function of OWI is to enable writes to and reads from all memory locations inside the PGA305 device that are available for OWI access.

# 7.3.12.1 Overview of OWI
The OWI digital communication is a master-slave communication link in which the PGA305 device operates as a slave device only. The master device controls when data transmission begins and ends. The slave device does not transmit data back to the master until it is commanded to do so by the master.

# 7.3.12.2 Activating and Deactivating the OWI Interface

# 7.3.12.2.1 Activating OWI Communication
The OWI master initiates OWI communication when the OWI master generates an OWI activation-pulse sequence on the PWR pin. When the PGA305 device receives a valid OWI activation-pulse sequence, it prepares itself for OWI communication. Notice that after the valid OWI activation-pulse sequence is received, the logic checks on the EEPROM lock status. If the EEPROM is locked, the sequence 0x5555 must be sent within 100 ms after the end of the activation-pulse sequence.

# 7.3.12.2.2 Deactivating OWI Communication
To deactivate OWI communication and restart the compensation engine inside the PGA305 device (if it was in reset), these two steps must be performed by the OWI master: 
- Set the OWI_XCR_EN bit in the DIG_IF_CTRL register to 0 to turn off the OWI transceiver. 
- Set the COMPENSATION_RESET bit in the COMPENSATION_CONTROL register to 0 to de-assert the compensation engine reset.

# 7.3.12.3 OWI Protocol

# 7.3.12.3.1 OWI Frame Structure

# 7.3.12.3.1.1 Standard Field Structure
Data is transmitted on the one-wire interface in byte-sized packets. The first bit of the OWI field is the start bit. The next eight bits of the field are data bits to be processed by the OWI control logic. The final bit in the OWI field is the stop bit. A group of fields make up a transmission frame. A transmission frame is composed of the fields necessary to complete one transmission operation on the one-wire interface. The standard field structure for a one-wire field is shown in Figure 9.

# 7.3.12.3.2 Standard OWI Field 
Start Bit 
Stop Bit 
Sync Field 
Measured Time 
Bit[0] 
Bit[1] 
Bit[2] 
Bit[3] 
Bit[4] 
Bit[5] 
Bit[6] 
Bit[7] 
cmd[0:7] 
data-1[0:# 7.3.12.3.1.2 Frame Structure
A complete one-wire data transmission operation is done in a frame with the structure is shown in Figure 10. Each transmission frame must have a synchronization field and a command field followed by zero to a maximum of eight data fields. The sync field and command fields are always transmitted by the master device. The data fields may be transmitted either by the master or the slave, depending on the command given in the command field. It is the command field which determines direction of travel of the data fields (master-to-slave or slave-to-master). The number of data fields transmitted is also determined by the command in the command field. The inter-field wait time is optional and may be necessary for the slave or the master to process data that has been received.
> NOTE: If the OWI remains idle in either the logic-0 or logic-1 state for more than 15 ms, then the PGA305 communication resets and requires a sync field as the next data transmission from the master.

# 7.3.12.3.1.3 Sync Field
The sync field is the first field in every frame that is transmitted by the master. The sync field is used by the slave device to compute the bit width transmitted by the master. This bit width is used to receive accurately all subsequent fields transmitted by the master. The format of the sync field is shown in Figure 11.
> NOTE: Consecutive sync-field bits are measured and compared to determine if a sync field was transmitted to the PGA305 device is valid. If the difference in bit widths of any two consecutive SYNC field bits is greater than ±25%, then the PGA305 device ignores the rest of the OWI frame and does not respond to the OWI message.

# 7.3.12.3.1.4 Command Field
The command field is the second field in every frame sent by the master. The command field contains instructions about what to do with and where to send the data that is transmitted to the slave. The command field can also instruct the slave to send data back to the master during a read operation. The number of data fields to be transmitted is also determined by the command in the command field. The format of the command field is shown in Figure 12.

# 7.3.12.3.1.5 Data Fields
---table begin---
Table title: Command Field
| Start Bit | cmd[0] | cmd[1] | cmd[2] | cmd[3] | cmd[4] | cmd[5] | cmd[6] | cmd[7] | Stop Bit |
|---|---|---|---|---|---|---|---|---|---|
---table end---
# 7.3.12.3.1.5 Data Fields
# 7.3.12.3.1.5 Data Fields
After the master has transmitted the command field in the transmission frame, zero or more data fields are
transmitted to the slave (write operation) or to the master (read operation). The data fields can be raw EEPROM
data or address locations in which to store data. The format of the data is determined by the command in the
command field. The typical format of a data field is shown in Figure 13.

# 7.3.12.3.2 OWI Commands
The following is the list of five OWI commands supported by PGA305:
1. OWI write
2. OWI read initialization
3. OWI read response
4. OWI burst write of EEPROM cache
5. OWI burst read from EEPROM cache

# 7.3.12.3.2.1 OWI Write Command
---table begin---
Table title: OWI Write Command
| FIELD | LOCATION | DESCRIPTION |
|---|---|---|
| BIT 7 | Command field | Basic write command |
| BIT 6 | Command field | 0 |
| BIT 5 | Command field | P2 |
| ... | ... | ... |
---table end---

# 7.3.12.3.2.2 OWI Read Initialization Command
... (Similar transformations continue for the rest of the document)

# 3.x.x Title example
# 7.3.12.3.2.5 OWI Burst Read Command (EEPROM Cache Access)
---table begin---
Table title: OWI Burst Read Command (EEPROM Cache Access)
| FIELD | LOCATION | DESCRIPTION |
|---|---|---|
| BIT 7 | Command field | Burst-read response (8 bytes) |
| BIT 6 | Command field | 1 |
| BIT 5 | Command field | 1 |
| BIT 4 | Command field | 0 |
| BIT 3 | Command field | 1 |
| BIT 2 | Command field | 0 |
| BIT 1 | Command field | 0 |
| BIT 0 | Command field | 1 |
| Data field 1 | Data field | First data byte retrieved EEPROM cache byte 0 |
| Data field 2 | Data field | Second data byte retrieved EEPROM cache byte 1 |
| Data field 3 | Data field | Third data byte retrieved EEPROM cache byte 2 |
| Data field 4 | Data field | Fourth data byte retrieved EEPROM cache byte 3 |
| Data field 5 | Data field | Fifth data byte retrieved EEPROM cache byte 4 |
| Data field 6 | Data field | Sixth data byte retrieved EEPROM cache byte 5 |
| Data field 7 | Data field | Seventh data byte retrieved EEPROM cache byte 6 |
| Data field 8 | Data field | Eighth data byte retrieved EEPROM cache byte 7 |
---table end---
# 3.x.x Title example

# 7.3.12.3.3 OWI Operations

# 7.3.12.3.3.1 Write Operation
The write operation on the one-wire interface is fairly straightforward. The command field specifies the write operation, where the subsequent data bytes are to be stored in the slave, and how many data fields are going to be sent. Additional command instructions can be sent in the first few data fields if necessary. The write operation is shown in Figure 14.

# 7.3.12.3.3.2 Read Operation
The read operation requires two consecutive transmission frames to move data from the slave to the master. The first frame is the read-initialization frame. It tells the slave to retrieve data from a particular location within the slave device and prepare to send it over the OWI. The data location may be specified in the command field or may require additional data fields for complete data-location specification. The data is not sent until the master commands it to be sent in the subsequent frame called the read-response frame. During the read-response frame, the data direction changes from master → slave to slave → master immediately after the read response command field is sent. Enough time elapses between the command field and data field to allow the signal drivers to change direction. This wait time is 20 µs, and the timer for this wait time is located on the slave device. After this wait time is complete, the slave transmits the requested data. The master device is expected to have switched its signal drivers and is ready to receive data. The read frames are shown in Figure 15.

# 7.3.12.3.3.3 EEPROM Burst Write
The user can use the EEPROM burst write to write eight bytes of data to the EEPROM cache with one OWI frame to allow fast programming of EEPROM. Note that the EEPROM page must be selected before the EEPROM can transfer the contents of the EEPROM memory cells to the EEPROM cache.

# 7.3.12.3.3.4 EEPROM Burst Read
The user can use the EEPROM burst read is used to read eight bytes of data from the EEPROM cache with one OWI frame to allow a fast reading of the EEPROM cache contents. The read process is used to verify the writes to the EEPROM cache.

# 7.3.12.4 OWI Communication-Error Status
The PGA305 device detects errors in OWI communication. The OWI_ERROR_STATUS_LO and OWI_ERROR_STATUS_HI registers contain OWI communication error bits. The communication errors detected include:
- Out-of-range communication baud rate
- Invalid SYNC field
- Invalid STOP bits in command and data
- Invalid OWI command

# 7.3.13 I2C Interface
The device includes an I2C digital communication interface capable of running up to 800 kHz. The main function of the I2C is to enable data capture from the PGA305 device as well as writes and reads from all registers available for I2C access.

# 7.3.13.1 Overview of I2C Interface
I2C is a synchronous serial communication standard that requires the following two pins for communication:
- SDA: I2C serial data line (SDA)
- SCL: I2C serial clock line (SCL)
In addition, the I2CADDR pin is used to select the I2C device address of PGA305. Specifically:
- I2CADDR - Logic 1 - Device address - 0x20, 0x22, 0x25 depending on the Digital Interface Page that is accessed.
- I2CADDR - Logic 0 - Device address - 0x40, 0x42, 0x45 depending on the Digital Interface Page that is accessed.

# ---table begin---
Table title: I2C Transfers Examples
| COMMAND | MASTER TO SLAVE DATA ON I2C SDA (I2CADDR = 0) | MASTER TO SLAVE DATA ON I2C SDA (I2CADDR = 1) |
|---|---|---|
| Write 0x80 to Control and Status Registers 0x30 (DAC_REG0_1) | Slave address: 010 0010 Register address: 0011 0000 Data: 1000 0000 | Slave address: 100 0010 Register address: 0011 0000 Data: 1000 0000 |
| Read from EEPROM Byte 7 | Slave Address: 010 0101 Register Address: 0000 0111 | Slave Address: 100 0101 Register Address: 0000 0111 |
| Write to EEPROM Cache Byte 7 | Slave Address: 010 0101 Register Address: 1000 0111 | Slave Address: 100 0101 Register Address: 1000 0111 |

# ---table end---
# 7.3.13 
Register addresses used for I2C Read Response are 0x05 on DI Page 0x00 for the Most Significant Byte and 0x04 on DI Page 0x00 for the Least Significant Byte.
---table begin---
Table title: Table 8. I2C Runtime Read Response Command
| I2C Read Response | Data Format (I2CADDR = 0) | Data Format (I2CADDR = 1) |
|---|---|---|
| Read Most Significant Byte | Slave address: 100 0000 (Slave Address + DI Page) Register address: 0000 0101 (Register Address) Data: 0000 0000 (Data) | Slave address: 010 0000 (Slave Address + DI Page) Register address: 0000 0101 (Register Address) Data: 0000 0000 (Data) |
| Read Least Significant Byte | Slave address: 100 0000 (Slave Ad | Register address: 0000 0100 (Register Address) |
---table end---
# ---table end---

# 7.3.13.2 Clocking Details of I2C Interface
The device samples the data on the SDA line when the rising edge of the SCL line is high, and is changed when the SCL line is low. The only exceptions to this indication are a start, stop, or repeated start condition as shown in Figure 17.

# ---table end---# 7.3.13.2 Clocking Details of I2C Interface
The device samples the data on the SDA line when the rising edge of the SCL line is high, and is changed when the SCL line is low. The only exceptions to this indication are a start, stop, or repeated start condition.

# 7.3.13.3 I C Interface Protocol
Figure 18 shows the basic protocol of the I2C frame for a Write operation.
The basic data transfer is to send two bytes of data to the specified slave address. The first data field is the register address and the second data field is the data sent or received.

# 7.3.13.4 PGA305 I2C Runtime Commands
During the PGA305 Operation while the Compensation Algorithm runs (COMPENSATION_RESET = 0), the I2C interface can collect data from the device when the interface sends I2C commands to the PGA305 device and reads a response from the PGA305 device.

# 7.3.13.5 PGA305 I2C Transfer Example
This I2C example presents the read of a single 24-bit sample from the PGA device. In this example, Command 0x04 Read PGA305 Compensated Output Value is used while the PGA305 slave address is 0x20 (I2CADDR = 1).
---table begin---
Table title: Table 9. I2C Transfer Example
| I2C Data Flow | Description |
|---|---|
| 1. Master Sends Command 0x04 (Read PGA305 Compensated Output Value) | 0x40 (Slave Address + DI Page + R/W bit) 0x09(Register Address) 0x04 (Data) Acknowledge Acknowledge Acknowledge |
| 2. Master Reads Byte2 (MS Byte) | 0x40 (Slave Address + DI Page + R/W bit) 0x04(Register Address) 0x41 (Slave Address + DI Page + R/W bit) Acknowledge Acknowledge 0xbb (Where 'bb' is the data Value) |
| 3. Master sends Commands 0x70 (Read Trail Word) | 0x40 (Slave Address + DI Page + R/W bit) 0x09(Register Address) 0x70 (Data) Acknowledge Acknowledge Acknowledge |
| 4. Master Reads Byte1 (Mid Significant Byte) | 0x40 (Slave Address + DI Page + R/W bit) 0x05(Register Address) 0x41 (Slave Address + DI Page + R/W bit) Acknowledge Acknowledge 0xbb (Where 'bb' is the data Value) |
| 5. Master Reads Byte0 (Least Significant Byte) | 0x40 (Slave Address + DI Page + R/W bit) 0x04(Register Address) 0x41 (Slave Address + DI Page + R/W bit) Acknowledge Acknowledge 0xbb (Where 'bb' is the data Value) |
---table end---
If the PGA305 device operates in 16-bit mode (ADC_24BIT_EN = 0), step 2 can be skipped.

# 7.3.14 DAC Output
The device includes a 14-bit digital-to-analog converter that produces an absolute output voltage with respect to the accurate reference voltage or a ratiometric output voltage with respect to the PWR supply. When the microprocessor undergoes a reset, the DAC registers are driven to the 0x000 code.

# 7.3.14.1 Ratiometric vs Absolute
Use the DAC_RATIOMETRIC bit in DAC_CONFIG to configure the DAC output in either ratiometric-to-PWR mode or independent-of-PWR (or absolute) mode. 
NOTE: In ratiometric mode, changes in the VPWR voltage result in a proportional change in the output voltage because the current reference for the DAC is derived from VPWR.

# 7.3.15 DAC Gain
The DAC gain buffer is a configurable buffer stage for the DAC output. The DAC gain amplifier can be configured to operate in voltage amplification mode for voltage output or current amplification mode for 4-mA to 20-mA applications. In voltage output mode, set the DAC_GAIN bits in the DAC_CONFIG register to a specific value to configure the DAC gain as shown in Figure 20. Use the 2-bit DAC_GAIN field to configure the DAC gain to one of four possible gain configurations. The final step of DAC gain is connected to PWR and ground, which gives the user the ability to drive the VOUT voltage close to the VPWR voltage. The DAC gain buffer also implements a COMP pin to allow the user to implement compensation when driving large capac.# 7.3.16 Memory

# 7.3.16.1 EEPROM Memory
Figure 21 shows the EEPROM structure. The contents of the EEPROM must be transferred to the EEPROM cache before writes. This means that the EEPROM can be programmed eight bytes at a time. EEPROM reads occur without the EEPROM cache.
---table begin---
Table tile: Structure of the EEPROM Interface
| Digital Compensation  | OWI Digital Interface | EEPROM Memory Cells (128 Bytes, 16 64 Bits) | EEPROM Cache (8 Bytes, 1 64 Bits) | EEPROM Program DATA_OUT [63:0] | Cache ADDRESS[3:0] | Read DATA_OUT[7:0] Cache | Write DATA_IN[7:0] Interface Mux | Read DATA_OUT[31:0] |
|---|---|---|---|---|---|---|---|---|
---table end---

# 7.3.16.1.1 EEPROM Cache
The EEPROM cache serves as temporary storage of data being transferred to selected EEPROM locations during the programming process.

# 7.3.16.1.2 EEPROM Programming Procedure
For programming the EEPROM, the EEPROM is organized in 16 pages of eight bytes each. Write to the 8-byte EEPROM cache to program the EEPROM memory cells. Select the EEPROM memory page to transfer the contents of the EEPROM cache.
1. Write the upper four bits of the 7-bit EEPROM address to the EEPROM_PAGE_ADDRESS register to select the EEPROM page.
2. Write to the EEPROM_CACHE register to load the 8-byte EEPROM cache. Note that all eight bytes must be loaded into the EEPROM_CACHE register.
3. Set the ERASE_AND_PROGRAM bit in the EEPROM_CTRL register. Setting this bit automatically erases the selected EEPROM memory page and programs it with the contents of the EEPROM_CACHE register. Alternatively, the user can write 1 to the ERASE bit in the EEPROM_CTRL register to erase the selected EEPROM memory page, and then write 1 to the PROGAM bit in the EEPROM_CTRL register once the erase is complete. The status of the erase and program operations can be monitored through the EEPROM_STATUS register.

# 7.3.16.1.3 EEPROM Programming Current
The EEPROM programming process results in an additional 6-mA current on the PWR pin for the duration of programming.

# 7.3.16.1.4 CRC
The last byte of the EEPROM memory is reserved for the CRC. This CRC value covers all data in the EEPROM memory. Every time the last byte is programmed, the CRC value is automatically calculated and validated. The validation process checks the calculated CRC value with the last byte programmed in the EEPROM memory cell. If the calculated CRC matches the value programmed in the last byte, the CRC_GOOD bit is set in the EEPROM_CRC_STATUS register.
The user can set the CALCULATE_CRC bit in the EEPROM_CRC register to initiate the CRC check. The status of the CRC calculation is available in the CRC_CHECK_IN_PROG bit in the EEPROM_CRC_STATUS register, while the result of the CRC validation is available in the CRC_GOOD bit in the EEPROM_CRC_STATUS register. The CRC calculation pseudo code is as follows: currentCRC8 = 0xFF; // Current value of CRC8 for NextData D = NextData;# 37. CRC Calculation
e programmed in the EEPROM memory cell. If the calculated CRC matches the value programmed in the last byte, the CRC_GOOD bit is set in the
EEPROM_CRC_STATUS register.
The user can set the CALCULATE_CRC bit in the EEPROM_CRC register to initiate the CRC check. The status of the CRC calculation is available in the CRC_CHECK_IN_PROG bit in the EEPROM_CRC_STATUS register, while the result of the CRC validation is available in the CRC_GOOD bit in the EEPROM_CRC_STATUS register.
The CRC calculation pseudo code is as follows:
currentCRC8 = 0xFF; // Current value of CRC8 for NextData D = NextData; C = currentCRC8; begin
nextCRC8_BIT0 = D_BIT7 ^ D_BIT6 ^ D_BIT0 ^ C_BIT0 ^ C_BIT6 ^ C_BIT7;
nextCRC8_BIT1 = D_BIT6 ^ D_BIT1 ^ D_BIT0 ^ C_BIT0 ^ C_BIT1 ^ C_BIT6;
nextCRC8_BIT2 = D_BIT6 ^ D_BIT2 ^ D_BIT1 ^ D_BIT0 ^ C_BIT0 ^ C_BIT1 ^ C_BIT2 ^ C_BIT6;
nextCRC8_BIT3 = D_BIT7 ^ D_BIT3 ^ D_BIT2 ^ D_BIT1 ^ C_BIT1 ^ C_BIT2 ^ C_BIT3 ^ C_BIT7;
nextCRC8_BIT4 = D_BIT4 ^ D_BIT3 ^ D_BIT2 ^ C_BIT2 ^ C_BIT3 ^ C_BIT4;
nextCRC8_BIT5 = D_BIT5 ^ D_BIT4 ^ D_BIT3 ^ C_BIT3 ^ C_BIT4 ^ C_BIT5;
nextCRC8_BIT6 = D_BIT6 ^ D_BIT5 ^ D_BIT4 ^ C_BIT4 ^ C_BIT5 ^ C_BIT6;
nextCRC8_BIT7 = D_BIT7 ^ D_BIT6 ^ D_BIT5 ^ C_BIT5 ^ C_BIT6 ^ C_BIT7;
end
currentCRC8 = nextCRC8_D8;
endfor
NOTE: The EEPROM CRC calculation is complete 340 µs after the digital core starts running at power up.

# 7.3.16.2 Control and Status Registers Memory
The digital compensator uses the Control and Status registers to interact with the analog blocks of the device.

# 7.3.17 Diagnostics
The PGA305 device implements the diagnostics listed in Table 10.
---table begin---
Table title: Programming Diagnostics
| DIAGNOSTICS | DESCRIPTION | ACTION |
|---|---|---|
| Digital-compensation-logic execution-timing error | DAC is disabled and compensation logic is set to reset |
| Digital-compensation-logic checksum error | DAC is disabled and compensation logic is set to reset |
| EEPROM is corrupted or EEPROM CRC = 0 | DAC code is driven to 0 code |
| Power-supply and signal-chain errors | DAC output is driven to the value determined by the FAULT register in EEPROM |
---table end---
The user can set the DIAG_ENABLE register in EEPROM to a non-zero value to enable the diagnostics listed in Table 10. To disable diagnostics, set the DIAG_ENABLE register in EEPROM to 0.

# 38. Power Supply Diagnostics
The PGA305 device includes circuits to monitor the reference and power supply for faults. Specifically, the signals that are monitored are:
- AVDD voltage
- DVDD voltage
- Bridge supply voltage
- Internal oscillator supply voltage
- Reference output voltage
The Electrical Characteristics – Diagnostics table lists the voltage thresholds for each of the power rails.

# 7.3.17.2 Signal Chain Faults
The PGA305 device includes circuits to monitor the P and T signal chains for faults. This section describes the faults monitored by the PGA305 device.

# 7.3.17.2.1 P Gain and T Gain Input Faults
The PGA305 device includes circuits to monitor for sensor connectivity faults. Specifically, the device monitors the bridge sensor pins for opens (including loss of connection from the sensor), short to ground, and short-to-sensor supply. The device can compare the voltage at INP+ and INP– pins with the overvoltage and undervoltage thresholds listed in the Electrical Characteristics – Diagnostics table as a way to monitor for sensor connectivity faults.
The device also includes an overvoltage monitor at the INT+ and INT– pins through the use of 1-MΩ pullup resistors.
Figure 22 shows the block diagram of the P gain and T gain input faults.

# 7.3.17.2.2 P Gain and T Gain Output Diagnostics
The PGA305 device includes modules that verify that the output signal of each gain is within a certain range.
This ensures that gain stages in the signal chain are working correctly.

# 7.3.17.2.3 Masking Signal Chain Faults
Use the bits in the AFEDIAG_MASK register in EEPROM to selectively enable and disable the signal chain
diagnostics. 
---table begin---
Table title: Signal Chain Fault Masking Bits
| BIT | DESCRIPTION |
|---|---|
| 0 | INP+ or INP– overvoltage |
| 1 | INP+ or INP– undervoltage |
---table end---

# 7.3.17.2.4 Fault Detection Timing
The PGA305 fault-monitoring circuits monitor faults either at power up or periodically. 
---table begin---
Table title: Fault Detection Timing
| FAULT | POWER UP OR RUN TIME | MINIMUM TIME AFTER FAULT OCCURS | MAXIMUM TIME AFTER FAULT OCCURS |
|---|---|---|---|
| Digital-compensation execution-timing error | Run time | 500 ms | — |
| Digital-compensation checksum error | Run time | 500 ms | — |
| EEPROM is corrupted or EEPROM CRC = 0 | Power up only (EEPROM is accessed only at power up) | N/A | N/A |
| Power supply and signal chain errors | Run time | 8 ms | 16 ms |
---table end---

# 7.3.18 Reading Diagnostics Information Through I2C
To receive Diagnostics Information through the I2C Interface while the PGA305 compensation algorithm runs, the
I2C command 0x06 is used. The Implemented Diagnostics in PGA305 are stuck fault, which means that if a
diagnostic fault occurred in the past, this will be reported when the next diagnostics read occurs even in the case
where the fault is# 7.3.18 Reading Diagnostics Information Through I2C
To receive Diagnostics Information through the I2C Interface while the PGA305 compensation algorithm runs, the I2C command 0x06 is used. The Implemented Diagnostics in PGA305 are stuck fault, which means that if a diagnostic fault occurred in the past, this will be reported when the next diagnostics read occurs even in the case where the fault is not present in the system any longer. When the I2C command has been received, the I2C will report the Power Supply diagnostics and the Analog Front End Diagnostics and will clear the stuck diagnostic flags.
---table begin---
Table title: Table 14. Diagnostics Information
| I2C Data Flow | Description | I2C Master | PGA305 |
|---|---|---|---|
| 1. Master Sends Command 0x06 (Read PGA305 Diagnostics) | 0x40 (Slave Address + DI Page + R/W bit) | 0x09(Register Address) | 0x06 (Data) |
|Acknowledge | Acknowledge | Acknowledge | |
| 2. Master Reads Byte1 (Power Supply Diagnostics) | 0x40 (Slave Address + DI Page + R/W bit) | 0x05(Register Address) | 0x41 (Slave Address + DI Page + R/W bit) |
| Acknowledge | Acknowledge | 0xbb (Where 'bb' is the data Value) | |
| 2. Master Reads Byte0 (Analog Front-End Diagnostics) | 0x40 (Slave Address + DI Page + R/W bit) | 0x04(Register Address) | 0x41 (Slave Address + DI Page + R/W bit) |
| Acknowledge | Acknowledge | 0xbb (Where 'bb' is the data Value) | |
---table end---

# 7.3.19 Digital Compensation and Filter
The PGA305 device implements a third-order TC and NL correction of the pressure and temperature inputs. The user can use a second-order IIR filter to filter and write the corrected output to the DAC as shown in Figure 24.

# 7.3.19.1 Digital Gain and Offset
The digital compensation implements digital gain and offset for both pressure and temperature. These are
calculated based on the OFF_EN bit in the OFFSET_ENABLE register. Use Equation 2 and Equation 3 when the
OFF_EN bit is 0.
`P = PGAIN × P ADC + POFFSET`
- PGAIN is the Pressure digital gain defined by the PADC_GAIN_MSB, PADC_GAIN_LSB registers
- POFFSET is the Pressure digital offset defined by the PADC_OFFSET_BYTE1, PADC_OFFSET_BYTE0 (MSB, LSB) registers
- P is the pressure
- P ADC is the pressure digital output
`T = TGAIN × T ADC + TOFFSET`
- TGAIN is the Temperature digital gain defined by the TADC_GAIN_MSB, TADC_GAIN_LSB registers
- TOFFSET is the Temperature digital offset defined by the TADC_OFFSET_BYTE1, TADC_OFFSET_BYTE0 (MSB, LSB) registers
- T is the temperature
- T ADC is the temperature digital output
Use Equation 4 and Equation 5 if the OFF_EN bit is set to 1:
`P = PGAIN × (P ADC + POFFSET)`
- PGAIN is the Pressure digital gain defined by the PADC_GAIN_MSB, PADC_GAIN_LSB registers
- POFFSET is the Pressure digital offset defined by the PADC_OFFSET_BYTE1, PADC_OFFSET_BYTE0 (MSB, LSB) registers
- P is the pressure
- P ADC is the pressure digital output
`T = TGAIN × (T ADC + TOFFSET)`
- TGAIN is the Temperature digital gain defined by the TADC_GAIN_MSB, TADC_GAIN_LSB registers
- TOFFSET is the Temperature digital offset defined by the TADC_OFFSET_BYTE1, TADC_OFFSET_BYTE0 (MSB, LSB) registers
- T is the temperature
- T ADC is the temperature digital output
For high-offset sensors or sensor bridges with a low or high common mode, it may be useful to use the Offset Enabled (OFF_EN = 1) option which will cancel the offset and the amplify the values in the digital domain. The PGA305 device allows the ability to cancel the offset and amplify the signal further before being used in the compensation equation. The determination of the digital gain and offset values is implemented automatically by the PGA305 GUI.

# 7.3.19.2 TC and NL Correction
Use Equation 6 to calculate the digital compensation.
`DATA_OUT = (h0 + h1 × T + h2 × T2 + h3 × T3) + (g0 + g1 × T + g2 × T2 + g3 × T3) × P + (n0 + n1 × T + n2 × T2 + n3 × T3) × P2 + (m0 + m1 × T + m2 × T2 + m3 × T3) × P3`
- DATA_OUT = Data thas is available to read using the I2C Interface
- DAC = Digitally compensated value at the input of the DAC
- hx, gx, nx and mx are TC and NL compensation coefficients programmed in EEPROM
- P is pressure
- T is temperature
`DAC = DATA_OUT / 1024 in 24-bit mode, or DAC = DATA_OUT / 4 in 16-bit mode`

# 7.3.19.2.1 TC and NL Coefficients
The PGA305 device implements third-order TC and NL compensation of the bridge offset, bridge span, and bridge nonlinearity. The equation has 16 coefficients, and hence requires at least 16 different measurement points to compute a unique set of 16 coefficients. 
Use Equation 7 to calculate the TC-compensated DAC output.
`DATA_OUT = (h0 + h1T + h2T2 + h3T3) + (g0 + g1T + g2T2 + g3T3) × P + (n0 + n1T + n2T2 + n3T3) × P2 + (m0 + m1T + m2T2 + m3T3) × P3`
- (1) H0EE and G0EE are the values stored in EEPROM, which are 222 times the actual H0 and G0 coefficients.
The 16 different P ADC and T ADC measurements# 5. Device Information
Device implements third-order TC and NL compensation of the bridge offset, bridge span, and bridge nonlinearity. The equation has 16 coefficients, and hence requires at least 16 different measurement points to compute a unique set of 16 coefficients. 
Use Equation 7 to calculate the TC-compensated DAC output.
`DATA_OUT = (h0 + h1T + h2T^2 + h3T^3) + (g0 + g1T + g2T^2 + g3T^3) × P + (n0 + n1T + n2T^2 + n3T^3) × P^2 + (m0 + m1T + m2T + m3T ) × P^3`
H0EE and G0EE are the values stored in EEPROM, which are 222 times the actual H0 and G0 coefficients. The 16 different P ADC and T ADC measurements can be made, for example, at four temperatures and at four different pressures. 
Note that:
- P GAIN and T GAIN values must be set to a fixed value for all measurements.
- At each measurement point, the P ADC value and the T ADC value must be recorded in order to compute the 16 coefficients.
Sometimes, it may be expensive to measure P ADC and T ADC at different temperatures and pressures. In this case, there are three approaches:
- Use a model of the bridge to estimate P ADC and T ADC measurements instead of actually measuring.
- Use batch modeling, in which a family of sense elements is characterized across temperature, and the TC coefficients of the compensation equation are determined prior to calibration. On a production line, measurements are made at a limited number of temperature and pressure set points, and coefficients are adjusted accordingly. Discuss with TI application engineers for details.
- Reduce the number of coefficients by reducing the order of TC compensation. Discuss the procedure to use fewer coefficients with TI application engineers.

# 7.3.19.2.1.1 No TC and NL Coefficients
Use Equation 8 for the P ADC-to-DAC conversion.
`DATA_OUT = H0EE + G0EE × P ADC`
---table begin---
Table title: Coefficient Values for No TC and NL Compensation
| COEFFICIENT | VALUE (HEX) |
|--------|---------|
| h0 | H0EE(1) |
| h1 | 0x000000 |
| h2 | 0x000000 |
| h3 | 0x000000 |
| g0 | G0EE(1) |
| g1 | 0x000000 |
| g2 | 0x000000 |
| g3 | 0x000000 |
| n0 | 0x000000 |
| n1 | 0x000000 |
| n2 | 0x000000 |
| n3 | 0x000000 |
| m0 | 0x000000 |
| m1 | 0x000000 |
| m2 | 0x000000 |
| m3 | 0x000000 |
---table end---
Consider an example of scaling the positive half of the 16-bit P ADC to a 14-bit DAC value. In this case, H0 = 0 and G0 = 0.5. 
Therefore, H0EE = 0, and G0EE = 221.

# 7.3.19.2.2 TC Compensation Using the Internal Temperature Sensor
Temperature compensation can be performed using the internal temperature sensor with T GAIN = 5 V/V gain. The internal temperature ADC values at the different temperatures listed in Table 17.
---table begin---
Table title: T ADC Value for the Internal Temperature Sensor
| TEMPERATURE | T ADC VALUE (HEX VALUE) |
|--------|---------|
| –40°C | 0x16C900 |
| 0°C | 0x1ACF00 |
| 150°C | 0x29E500 |
---table end---
For T ADC at intermediate temperatures, use linear interpolation.

# 7.3.19.3 Clamping
The output of the digital compensation is clamped. The low and high clamp values are programmable using the LOW_CLAMP and HIGH_CLAMP registers in the EEPROM. In addition, the user can use the NORMAL_LOW and NORMAL_HIGH registers in the EEPROM to configure the normal operating output. Figure 25 shows an example of the clamping feature for a 0-V to 5-V output operational mode. In a similar way, the output of the compensation can be configured when the 4-mA to 20-mA operational mode is used. In such case, the LOW_CLAMP value must be larger than the maximum current necessary for normal operation of the device. 

# 7.3.19.4 Filter
The IIR filter is as follows:
w(n) = (a0 × DATA_OUT(n) + a1 × w(n – 1) + a2w(n – 2))
- a0, a1, and a2 are the IIR filter coefficients,
- DATA_OUT(n) is the DATA_OUT output prior to the IIR filter,
DATA_OUTF(n) = (b0 × w(n) + b1 × w(n – 1) + b2w(n – 2)
- b0, b1, and b2 are the IIR filter coefficients,
- DATA_OUTF(n) is the output of the PGA305 device after the second-order IIR filter.

# 7.3.20 Filter Coefficients

# 7.3.20.1 No Filtering
If filtering must be disabled, set a0 = 0x0000.
---table begin---
Table title: Filter Coefficients for P ADC Sampling Rate = 1024 µs
| CUTOFF FREQUENCY (Hz) | a0 (Hex) | a1 (Hex) | a2 (Hex) | b0 (Hex) | b1 (Hex) | b2 (Hex) |
|---|---|---|---|---|---|---|
| 76.8 | 4000 | AAA1 | 2060 | 0B01 | 1602 | 0B01 |
| 89.6 | 4000 | B169 | 1CEE | 0E57 | 1CAF | 0E57 |
| ... | ... | ... | ... | ... | ... | ... |
---table end---
For Other Filter Cutoff frequencies please contact Texas Instruments support.

# 7.4 Device Functional Modes
There are two main functional modes for the PGA305 device: current (4-mA to 20-mA loop) and voltage modes...

# 7.4.2 Current Mode
When configured in this mode, the OUT pin is driving the base of a bipolar junction transistor (BJT)...

# 7.5 Register Maps

# 7.5.1 Register Settings
# 7.5.1 Register Settings
Before the device can be used in any application, it must be configured by setting various control registers to the desired values.
---table begin---
Table title: Default Register Settings
| REGISTER | VALUE (HEX) | DESCRIPTION |
|---|---|---|
| DIG_IF_CTRL | 0x62 | I2C Interface Enabled in Fast Mode (400kHz - 800kHz) |
| DAC_CONFIG | 0x00 | DAC is set for absolute voltage output |
| OP_STAGE_CTRL | 0x02 | Output is configured for 0V - 5V absolute Voltage Output (DAC Gain 4V/V) |
| BRG_CTRL | 0x01 | Bridge excitation is set to 2.5 V |
| ... | ... | ... |
---table end---
# 7.5.1 Register Settings

# 7.5.2 Control and Status Registers
# 3.
---table begin---
Table Name: Control and Status Registers (continued)
| Register Name | DI Page Address | DI Offset Address | EEPROM Address | R/W | D7 | D6 | D5 | D4 | D3 | D2 | D1 |D0 |
| - | - | - | - | - | - | - | - | - | - | - | - | - |
| M0_MSB | N/A | N/A | 0x40000026 | RW | M0 [23] - | SIGN | M0 [22] | M0 [21] | M0 [20] | M0 [19] | M0 [18] | M0 [17] | M0 [16] |
| M1_LSB | N/A | N/A | 0x40000027 | RW | M1 [7] | M1 [6] | M1 [5] | M1 [4] | M1 [3] | M1 [2] | M1 [1] | M1 [0] |
| ... | ... | ... | ... | ... | ... | ... | ... | ... | ... | ... | ... | ... |
---table end---
# 7.5.2 Control and Status Registers

# 3.1.
# 1. Title
---table begin---
Table title: Control and Status Registers continued
| Register Name | DI Page Address | DI Offset Address | EEPROM Address | R/W | D7 | D6 | D5 | D4 | D3 | D2 | D1 | D0 |
|---|---|---|---|---|---|---|---|---|---|---|---|---|
| LOW_CLAMP_MS B | N/A | N/A | 0x40000041 | RW | LOW_CLAM P[15] | LOW_CLAM P[14] | LOW_CLAM P[13] | LOW_CLAM P[12] | LOW_CLAM P[11] | LOW_CLAM P[10] | LOW_CLAM P[9] | LOW_CLAM P[8] |
| HIGH_CLAMP_LS B | N/A | N/A | 0x40000042 | RW | HIGH_CLAM P[7] | HIGH_CLAM P[6] | HIGH_CLAM P[5] | HIGH_CLAM P[4] | HIGH_CLAM P[3] | HIGH_CLAM P[2] | HIGH_CLAM P[1] | HIGH_CLAM P[0] |
| HIGH_CLAMP_M SB | N/A | N/A | 0x40000043 | RW | HIGH_CLAM P[15] | HIGH_CLAM P[14] | HIGH_CLAM P[13] | HIGH_CLAM P[12] | HIGH_CLAM P[11] | HIGH_CLAM P[10] | HIGH_CLAM P[9] | HIGH_CLAM P[8] |
| ... |
---table end---
# 3.1.

# 2. Title
# 1. Table 20. Control and Status Registers
---table begin---
Table: Control and Status Registers 1
| Register Name | N/A | N/A | Address | R/W | D7 | D6 | D5 | D4 | D3 | D2 | D1 | D0 |
|---|---|---|---|---|---|---|---|---|---|---|---|---|
| A2_MSB | N/A | N/A | 0x4000004F | RW | IIR_FILT_A 2[15] | IIR_FILT_A2[ 14] | IIR_FILT_A2[ 13] | IIR_FILT_A2[ 12] | IIR_FILT_A2[ 11] | IIR_FILT_A2[ 10] | IIR_FILT_A2[ 9] | IIR_FILT_A2[ 8] |
| B0_LSB | N/A | N/A | 0x40000050 | RW | IIR_FILT_B 0[7] | IIR_FILT_B0[ 6] | IIR_FILT_B0[ 5] | IIR_FILT_B0[ 4] | IIR_FILT_B0[ 3] | IIR_FILT_B0[ 2] | IIR_FILT_B0[ 1] | IIR_FILT_B0[ 0] |
| ... |
---table end---
# 2. Title

# 2. Table 20. Control and Status Registers (continued)
---table begin---
Table: Control and Status Registers 2
| Register Name | DI Page | Address | DI Offset | Address | EEPROM | Address | R/W | D7 | D6 | D5 | D4 | D3 | D2 | D1 | D0 |
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
| B2_LSB | N/A | N/A | 0x40000054 | RW | IIR_FILT_B 2[7] | IIR_FILT_B2[ 6] | IIR_FILT_B2[ 5] | IIR_FILT_B2[ 4] | IIR_FILT_B2[ 3] | IIR_FILT_B2[ 2] | IIR_FILT_B2[ 1] | IIR_FILT_B2[ 0] |
| ... |
---table end---

# 3. Table 20. Control and Status Registers (continued)
# 7. Table 20. Control and Status Registers (continued)
---table begin---
Table: Control and Status Registers 2
| Register Name | DI Page | Address | DI Offset | Address | EEPROM | Address | R/W | D7 | D6 | D5 | D4 | D3 | D2 | D1 | D0 |
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
| COMPENSATION_CONTROL | 0x0 | 0x0C | N/A | RW |COMPENSATION_RESET | IF_SEL | | | | | | | 
| ... |
---table end---
# 3. Table 20. Control and Status Registers (continued)

# 7.5.2.1 Digital Interface Control (M0 Address = 0x40000506) (DI Page Address = 0x2) (DI Page Offset = 0x06)
---table begin---
Table: DIG_IF_CTRL Register and DIG_IF_CTRL Field Descriptions
| Register | Bit | Description |
|---|---|---|
| DIG_IF_CTRL | 0: | 1: I2C_EN |
| | 1: | I2C is Enabled |
| | 0: | I2C is Disabled |
| | 2: | |
| | 3: | |
| | 4: | |
| | 5: | I2C_RATE |
| | 1: | I2C transfer rate is >400KPBPS, ≤800 KBPS |
| | 0: | I2C transfer rate is ≤400 KBPS |
| | 6: | I2C_DEGLITCH_EN |
| | 1: | Enables deglitch filters on I2C interface |
| | 0: | Disables deglitch filters on I2C interface |
| | 7: | |
---table end---
# 7.5.2.1 Digital Interface Control (M0 Address = 0x40000506) (DI Page Address = 0x2) (DI Page Offset = 0x06)
--- And the conversion goes on for rest of the text ---# 7.5.2.5 BRDG_CTRL (EEPROM Address = 0x40000034) (DI Page Address: 0x2) (DI Page Offset: 0x46)
Figure 28. BRDG_CTRL Register
7 6 5 4 3 2 1 0
UNUSED UNUSED UNUSED UNUSED UNUSED VBRDG_ CTRL[1] VBRDG_ CTRL[0] BRDG_EN
RW RW 0 0
---table begin---
Table 27. BRDG_CTRL Field Descriptions
| Register | Bit | Description |
|---|---|---|
| BRDG_CTRL | 0: BRDG_EN | 0: Bridge Voltage Disabled 1: Bridge Voltage Enabled |
| | 1: VBRDG_CTRL[0] | 2: VBRDG_CTRL[1] |
| VBRDG_CTRL | 1:1 | VBRDG_CTRL[0] Bridge Supply Voltage 0 0 2.5V |
| | 0:1 | 2.0V |
| | 1:0 | 1.25V |
| | 1:1 | 1.25V |
| | 3–7: | UNUSED |

# 7.5.2.6 P_GAIN_SELECT (EEPROM Address = 0x40000035) (DI Page Address: 0x2) (DI Page Offset: 0x47)
--- and so on ---# 7.5.2.11 EEPROM_LOCK (EEPROM Address = 0x40000057)
---table begin---
Table 33. EEPROM_LOCK Field Descriptions
| Register | Bit | Description |
|---|---|---|
| EEPROM_LOCK | 0: EEPROM_LOCK | 1: EEPROM is locked - EEPROM is not accessible 0: EEPROM is unlocked - EEPROM is accessible |
| | 1–7: | UNUSED |
---table end---

# 7.5.2.12 AFEDIAG_CFG (EEPROM Address = 0x40000058)
---table begin---
Table 34. AFEDIAG_CFG Field Descriptions
| Register | Bit | Description |
|---|---|---|
| AFEDIAG_CFG | PD2 PD1 | Pull Down Resistor Value |
| | 0: PD1 | 4MΩ |
| | 1: PD2 | 3MΩ |
| | 0:1 | 2MΩ |
| | 1:1 | 1MΩ |
| | 2: THRS[0] | Threshold |
| | 3: THRS[1] | Threshold |
| | 4: THRS[2] | Threshold |
| | 5: DIS_R_P | 1: Disables pulldown resistors used for open/short diagnostics on the INP+ and INP– pins 0: Enables pulldown resistors used for open/short diagnostics on the INP+ and INP– pins |
| | 6: DIS_R_T | 1: Disables pullup resistors used for open/short diagnostics on the INT+ and INT– pins 0: Enables pullup resistors used for open/short diagnostics on the INT+ and INT– pins |
| | 7: | UNUSED |
---table end---

# 7.5.2.13 AFEDIAG_MASK (EEPROM Address = 0x40000059)
---table begin---
Table 35. AFEDIAG_MASK Field Descriptions
| Register | Bit | Description |
|---|---|---|
| AFEDIAG | 0: INP_OV | 1: Enable overvoltage detection at input pins of P Gain 0: Disable overvoltage detection at input pins of P Gain |
| | 1: INP_UV | 1: Enable undervoltage detection at input pins of P Gain 0: Disable undervoltage detection at input pins of P Gain |
| | 2: INT_OV | 1: Enable overvoltage detection at input pins of T Gain 0: Disable overvoltage detection at input pins of T Gain |
| | 3: UNUSED | |
| | 4: PGAIN_OV | 1: Enable overvoltage detection at output pins of P Gain 0: Disable overvoltage detection at output pins of P Gain |
| | 5: PGAIN_UV | 1: Enable undervoltage detection at output pins of P Gain 0: Disable undervoltage detection at output pins of P Gain |
| | 6: TGAIN_OV | 1: Enable overvoltage detection at output pins of T Gain 0: Disable overvoltage detection at output pins of T Gain |
| | 7: TGAIN_UV | 1: Enable undervoltage detection at output pins of T Gain 0: Disable undervoltage detection at output pins of T Gain |
---table end---

# 7.5.2.14 ADC_24BIT_ENABLE (EEPROM Address = 0x40000068)
---table begin---
Table 36. ADC_24BIT_ENABLE Field Descriptions
| Register | Bit | Description |
|---|---|---|
| ADC_24BIT_ENABLE | 0: ADC_24BIT_EN | 1: 24 bit Data Compensation and Output 0: 16 bit Data Compensation and Output |
---table end---

# 7.5.2.15 OFFSET_ENABLE (EEPROM Address = 0x40000069)
# 7.5.2.15 OFFSET_ENABLE (EEPROM Address = 0x40000069)
---table begin---
Table 37. OFFSET_ENABLE Field Descriptions
| Register  | Bit  | Description |
|---|---|---|
| OFFSET_ENABLE  | 0: OFF_EN | 1: Offset Sensor Digital Gain and Offset Compensation Used 0: Normal Sensor Digital Gain and Offset Compensation Used |
---table end---
# 7.5.2.15 OFFSET_ENABLE (EEPROM Address = 0x40000069)

# 7.5.2.16 COMPENSATION_CONTROL (EEPROM Address = N/A) (DI Page Address: 0x0) (DI Page Offset: 0x0C)
---table begin---
Table 38. COMPENSATION_CONTROL Field Descriptions
| Register  | Bit  | Description |
|---|---|---|
| COMPENSATION_CONTROL  | 0: IF_SEL | 1: Digital Interface accesses the PAG305 resources 0: Calculation Engine accesses the PAG305 resources |
|   | 1: COMPENSATION_RESET | 1: Compensation Engine is in Reset 0: Compensation Engine is Running |
|   | 2–7: UNUSED | |
---table end---

# 7.5.2.17 EEPROM_PAGE_ADDRESS (EEPROM Address = N/A) (DI Page Address: 0x5) (DI Page Offset: 0x88)
---table begin---
Table 39. EEPROM_PAGE_ADDRESS Field Descriptions
| Register  | Bit  | Description |
|---|---|---|
| EEPROM_PAGE_ADDRESS  | 0–3: ADDR[0-3] | EEPROM page address used in the EEPROM Programming Procedure |
| | 4–7: UNUSED | |
---table end---

# 7.5.2.18 EEPROM_CTRL (EEPROM Address = N/A) (DI Page Address: 0x5) (DI Page Offset: 0x89)
---table begin---
Table 40. EEPROM_CTRL Field Descriptions
| Register  | Bit  | Description |
|---|---|---|
| EEPROM_CTRL  | 0: PROGRAM | 1: Program contents of EEPROM cache into EEPROM memory pointed to by EEPROM_PAGE_ADDRESS 0: No action |
| | 1: ERASE | 1: Erase contents of EEPROM memory pointed to by EEPROM_PAGE_ADDRESS 0: No action |
| | 2: ERASE_AND_PROGRAM | 1: Erase contents of EEPROM memory pointed to by EEPROM_PAGE_ADDRESS and program of contents of EEPROM cache 0: No action |
| | 3: FIXED_ERASE_PROG_TIME | 1: Use Fixed 8ms as the Erase/Program time 0: Use Variable time <8ms as the Erase/Program time. The EEPROM programming logic will determine the duration to program the EEPROM memory. |
| | 4–7: UNUSED | |
---table end---

# 7.5.2.19 EEPROM_CRC (EEPROM Address = N/A) (DI Page Address: 0x5) (DI Page Offset: 0x8A)
---table begin---
Table 41. EEPROM_CRC Field Descriptions
| Register  | Bit  | Description |
|---|---|---|
| EEPROM_CRC  | 0: CALCULATE_CRC | 1: Calculate EEPROM CRC 0: No action |
| | 1–7: UNUSED | |
---table end---

# 7.5.2.20 EEPROM_STATUS (EEPROM Address = N/A) (DI Page Address: 0x5) (DI Page Offset: 0x8B)
---table begin---
Table 42. EEPROM_STATUS Field Descriptions
| Register  | Bit  | Description |
|---|---|---|
| EEPROM_STATUS  | 0: READ_IN_PROGRESS | 1: EEPROM Read in progress 0: EEPROM Read not in progress |
| | 1: ERASE_IN_PROGRESS | 1: EEPROM Erase in progress 0: EEPROM Erase not in progress |
| | 2: PROGRAM_IN_PROGRESS | 1: EEPROM Program in progress 0: EEPROM Program not in progress |
| | 3–7: UNUSED | |
---table end---

# 7.5.2.21 EEPROM_CRC_STATUS (EEPROM Address = N/A) (DI Page Address: 0x5) (DI Page Offset: 0x8C)
# 7.5.2.21 EEPROM_CRC_STATUS (EEPROM Address = N/A) (DI Page Address: 0x5) (DI Page Offset: 0x8C)
---table begin---
Table title: EEPROM_CRC_STATUS Field Descriptions
| Register       | Bit | Description |
|---|---|---|
| EEPROM_CRC_STATUS | 0: CRC_CHECK_IN_PROGRESS | 1: EEPROM CRC check in progress |
| | | 0: EEPROM CRC check not in progress |
| | 1: CRC_GOOD | 1: EEPROM Programmed CRC matches calculated CRC |
| | | 0: EEPROM Programmed CRC does not match calculated CRC |
| | 2–7: UNUSED | |
---table end---
# 7.5.2.21 EEPROM_CRC_STATUS (EEPROM Address = N/A) (DI Page Address: 0x5) (DI Page Offset: 0x8C)

# 7.5.2.22 EEPROM_CRC_VALUE (EEPROM Address = 0x4000007F) (DI Page Address: 0x5) (DI Page Offset: 0x8D)
---table begin---
Table title: EEPROM_CRC_VALUE Field Descriptions
| Register    | Bit  | Description |
|---|---|---|
| EEPROM_CRC_VALUE | 0–7 | CRC value as calculated by the digital logic |
| | | EEPROM CRC value should be located in the last byte of the EEPROM |
---table end---

# 8 Application and Implementation
Note: Information in the following applications sections is not part of the TI component specification, and TI does not warrant its accuracy or completeness. TI’s customers are responsible for determining suitability of components for their purposes. Customers should validate and test their design implementation to confirm system functionality.

# 8.1 Application Information
The PGA305 can be used in a variety of applications to measure pressure and temperature. Depending on the application, the device can be configured in different modes.

# 8.2 Typical Applications
Figure 46 depicts the PGA305 in a typical application, including device power, connections for the analog inputs from a resistive bridge sensor and temperature sensor, as well as I2C communication lines, and finally the output stage in a voltage output configuration.

# 8.2.1 4-mA to 20-mA Output With Internal Sense Resistor
Figure 47 provides an example of how to wire a PGA305 device for 4 to 20mA current output mode. The internal structure of the output stage is shown, including the states of the internal switches when the device is configured for 4 to 20mA current output mode.

# 8.2.1.1 Design Requirements
There are only a few requirements to take into account when using the PGA305 device in a design:
- Do not exceed the maximum slew rate of 0.5 V/µs at the PWR pin.
- Place a 100-nF capacitor from the AVDD pin to ground, as close to the AVDD pin as possible.
- Place a 100-nF capacitor from the DVDD pin to ground, as close to the DVDD pin as possible.
- Place a capacitor between 10 nF and 1000 nF from the REFCAP pin to ground as close to the REFCAP pin as possible.# 8.2.1.1 Design Requirements
There are only a few requirements to take into account when using the PGA305 device in a design:
- Do not exceed the maximum slew rate of 0.5 V/µs at the PWR pin.
- Place a 100-nF capacitor from the AVDD pin to ground, as close to the AVDD pin as possible.
- Place a 100-nF capacitor from the DVDD pin to ground, as close to the DVDD pin as possible.
- Place a capacitor between 10 nF and 1000 nF from the REFCAP pin to ground as close to the REFCAP pin as possible.
- Place a 150-Ω resistor between the COMP pin and the emitter of the BJT for current-loop stability purposes.
- Place a 10-Ω resistor between the FB+ pin and the negative terminal of the controller for current measurement.

# 8.2.1.2 Detailed Design Procedure

# 8.2.1.2.1 Calibration Tips

# 8.2.1.2.1.1 Programming the EEPROM for 4-mA to 20-mA Output
The EEPROM in the PGA305 is configured by default to operate in current mode using the OP_STG_CTRL register. If not, the user must follow this sequence to change it to current mode:
1. Send an OWI activation pulse to stop the digital compensation from running.
2. Set OP_STAGE_CTRL to 0x80 for current mode and DAC_CONFIG EEPROM to 0x00 or 0x01 for No_Gain.
3. Let the digital compensation run again to read the new EEPROM values.

# 8.2.1.3 Application Curve
Voltage measured between the GND pin in the PGA305 device and the negative terminal of the controller. This includes the internal 40-Ω resistor and an external 10-Ω resistor, VPWR = 15 V. The DAC codes used were 0x880 and 0x2760 for 4 mA and 20 mA, respectively.

# 8.2.2 0- to 10-V Absolute Output With Internal Drive

# 8.2.2.1 Design Requirements
There are only a few requirements to take into account when using the PGA305 in a design:
- Do not exceed the maximum slew rate of 0.5 V/µs at the VDD pin.
- Place a 100-nF capacitor from the AVDD pin to ground, as close to the AVDD pin as possible.
- Place a 100-nF capacitor from the DVDD pin to ground, as close to the DVDD pin as possible.
- Place a capacitor between 10 nF and 1000 nF from the REFCAP pin to ground, as close to the REFCAP pin as possible.
- Use the COMP pin and an isolation resistor to implement compensation when driving large capacitive loads with the OUT pin.

# 8.2.3 0- to 5-V Ratiometric Output With Internal Drive# 8.2.3 0- to 5-V Ratiometric Output With Internal Drive
图 50 provides an example of how to wire a PGA305 device for 0 to 5V ratiometric output voltage mode. The internal structure of the output stage is shown, including the states of the internal switches when the device is configured for ratiometric voltage output. Note that the position of S0 is dependent on the configuration of the voltage output gain selected in the OP_STAGE_CTRL register.

# 8.2.3.1 Design Requirements
There are only a few requirements to take into account when using the PGA305 in a design:
- Do not exceed the maximum slew rate of 0.5 V/µs at the PWR pin.
- Place a 100-nF capacitor from the AVDD pin to ground, as close to the AVDD pin as possible.
- Place a 100-nF capacitor from the DVDD pin to ground, as close to the DVDD pin as possible.
- Place a capacitor between 10 nF and 1000 nF from the REFCAP pin to ground, as close to the REFCAP pin as possible.
- Use the COMP pin and an isolation resistor to implement compensation when driving large capacitive loads with the OUT pin.

# 8.2.3.2 Detailed Design Procedure

# 8.2.3.2.1 Programmer Tips

# 8.2.3.2.1.1 Resetting the Microprocessor and Enable Digital Interface
The user must configure these bits to reset the M0 microprocessor and enable digital interface:
1. Set the IF_SEL bit in the MICRO_INTERFACE_CONTROL register to 1.
2. Set the MICRO_RESET bit in the MICRO_INTERFACE_CONTROL register to 1.

# 8.2.3.2.1.2 Turning On the Accurate Reference Buffer (REFCAP Voltage)
The following bits must be configured to turn ON the accurate reference buffer:
1. Set the SD bit in the ALPWR register to 0.
2. Set the ADC_EN_VREF bit in the ALPWR register to 1.
By turning on the accurate reference buffer, the reference voltage can be measured on REFCAP pin. Further, the capacitor on the REFCAP pin is connected to the reference buffer.

# 8.2.3.2.1.3 Turning On DAC and DAC GAIN
The user must configure these bits to turn on DAC and DAC GAIN:
- Set the SD bit in ALPWR register to 0.
- Set the ADC_EN_VREF bit in the ALPWR register to 1.
- Set the DAC_ENABLE bit in the DAC_CTRL_STATUS register to 1.
- Set the 4_20_MA_EN bit in the OP_STAGE_CTRL register for the voltage-output or current-output mode.
- Set the DACCAP_EN bit in the OP_STAGE_CTRL register to connect or disconnect the external capacitor at the DAC output.
- Set the DAC_RATIOMETRIC bit in the DAC_CONFIG register for ratiometric or absolute-voltage output mode.
- Set the TEST_MUX_DAC_EN bit in the AMUX_CTRL register to 1.

# 9 Power Supply Recommendations
The PGA305 device has a single pin, PWR, for the input power supply. The maximum slew rate for the PWR pin is 0.5 V/µs as specified in the Recommended Operating Conditions. Faster slew rates might generate a POR. A decoupling capacitor for PWR should be placed as close to the pin as possible.

# 10 Layout

# 10.1 Layout Guidelines
Standard good layout practices must be used when designing a board to test the PGA305 device. Depending on the number of layers in the board, one or more GND planes should be inserted as internal layers. However, given the lim# 9. Power Supply Recommendations
The PGA305 device has a single pin, PWR, for the input power supply. The maximum slew rate for the PWR pin is 0.5 V/µs as specified in the Recommended Operating Conditions. Faster slew rates might generate a POR. A decoupling capacitor for PWR should be placed as close to the pin as possible.

# 10. Layout

# 10.1. Layout Guidelines
Standard good layout practices must be used when designing a board to test the PGA305 device. Depending on the number of layers in the board, one or more GND planes should be inserted as internal layers. However, given the limited number of external components required for an application using the PGA305 device and the number of NC pins in the device, so it is possible to design a simple two-layer board. In addition, the PWR decoupling capacitor must be placed as close to the pin as possible. In a similar way, the 100-nF recommended capacitors for the AVDD and DVDD regulators as well as the 10-nF to 1000-nF recommended capacitor for REFCAP must be placed as close to their respective pins as possible.
Depending on the application, the signal traces for FB–, FB+, COMP, and OUT must be routed so that they do not cross one another to minimize coupling.

# 10.2. Layout Example
This section shows how the main guidelines listed in these layout guidelines can be implemented in a six-layer, socketed EVM of the PGA305 device. Two main GND planes (layer 2 and 5) were used to provide a nearby GND plane to each of the signal layers and the power plane (layer 3) in the EVM. This EVM supports voltage and current modes for the device, so depending on the application, GND separation may be necessary as a result. For this example, layer 2 is a solid GND plane for the majority of the circuitry in the EVM (IRETURN). Most of the circuitry is referred to this GND plane, so layers 3 and 4 also contain copper pours connected to IRETURN. This GND plane is the return path for the supply used in the 4-mA to 20-mA loop. Layer 5 is a split plane for the ground references for the digital communication signals used for this EVM (USBGND) and the ground pins in the device (GND, AVSS and DVSS), referred to as ASICGND. The EVM provides jumpers to connect, or disconnect, these three planes one from another, depending on the desired configuration.
This section also shows the recommended capacitors for the proper operation of the PGA305 device. These capacitors are placed as close to their respective pins of the socket used for this particular EVM as possible. The signal traces for FB–, FB+, COMP, and OUT are also routed in the same layer to avoid crossing each other and to minimize coupling.

# 11. Device and Document Support

# 11.1. Receive Document Updates
To receive document updates, please navigate to the device product folder on TI.com.cn. Click the "Notify me" button in the upper right corner to register, and you can receive a weekly summary of product information changes. For detailed information about the changes, please check the revision history included in any revised documents.

# 11.2. Community Resources
The following links provide connections to TI community resources. The content of the links is provided by the distributor "AS-IS". These content do not constitute TI technical specifications, and they may not necessarily reflect the views of TI; please refer to TI's Terms of Use.
[E2E Community](e2e.ti.com) for engineers by engineers. The purpose of this community is to facilitate collaboration among engineers. At e2e.ti.com, you can ask questions, share knowledge, expand ideas, and help solve problems together with peer engineers.

# 11.3. Design Support
TI Reference Design Support can help you quickly find helpful E2E forums, design support tools, and contact information for technical support.

# 11.4. Trademarks
E2E is a trademark of Texas Instruments. All other trademarks are the property of their respective owners.

# 11.5. Electrostatic Discharge Warning
ESD can damage this integrated circuit. Texas Instruments (TI) recommends that all integrated circuits be handled with appropriate precautions. If the correct handling measures and installation procedures are not followed, the integrated circuit may be damaged.
The damage from ESD can range from minor performance degradation to complete device failure. Precision integrated circuits may be more susceptible to damage because very small parameter changes could cause the device to not meet its published specifications.

# 11.6. Glossary
SL# 11.3. Trademarks
E2E is a trademark of Texas Instruments. All other trademarks are the property of their respective owners.

# 11.4 Electrostatic Discharge Warning
ESD can damage this integrated circuit. Texas Instruments (TI) recommends that all integrated circuits be handled with appropriate precautions. Failure to follow proper handling and installation procedures may result in damage to the integrated circuit. The damage from ESD can range from slight performance degradation to complete device failure. Precision integrated circuits may be more susceptible to damage because very small parameter changes could cause the device to not meet its published specifications.

# 11.5 Glossary
SLYZ022— TI glossary. This glossary lists and explains terms, abbreviations, and definitions.
---table begin---
Table title: Mechanical, Packaging, and Orderable Information
| Orderable Device | Status(1) | Package Type | Package Drawing | Pins | Package Qty | Eco Plan(2) | Lead Finish/Ball Material(6) | MSL Peak Temp(3) | Op Temp (°C) | Device Marking(4/5) |
|---|---|---|---|---|---|---|---|---|---|---|
| PGA305ARHHR | ACTIVE | VQFN | RHH | 36 | 2500 | RoHS & Green | NIPDAU | Level-2-260C-1 YEAR | -40 to 150 | PGA305A RHH |
| PGA305ARHHT | ACTIVE | VQFN | RHH | 36 | 250 | RoHS & Green | NIPDAU | Level-2-260C-1 YEAR | -40 to 150 | PGA305A RHH |
---table end---
(1) The marketing status values are defined as follows:
ACTIVE: Product device recommended for new designs.
LIFEBUY: TI has announced that the device will be discontinued, and a lifetime-buy period is in effect.
NRND: Not recommended for new designs. Device is in production to support existing customers, but TI does not recommend using this part in a new design.
PREVIEW: Device has been announced but is not in production. Samples may or may not be available.
OBSOLETE: TI has discontinued the production of the device.
(2) RoHS: TI defines "RoHS" to mean semiconductor products that are compliant with the current EU RoHS requirements for all 10 RoHS substances, including the requirement that RoHS substance do not exceed 0.1% by weight in homogeneous materials. Where designed to be soldered at high temperatures, "RoHS" products are suitable for use in specified lead-free processes. TI may reference these types of products as "Pb-Free". RoHS Exempt: TI defines "RoHS Exempt" to mean products that contain lead but are compliant with EU RoHS pursuant to a specific EU RoHS exemption. Green: TI defines "Green" to mean the content of Chlorine (Cl) and Bromine (Br) based flame retardants meet JS709B low halogen requirements of <=1000ppm threshold. Antimony trioxide based flame retardants must also meet the <=1000ppm threshold requirement.
(3) MSL, Peak Temp. - The Moisture Sensitivity Level rating according to the JEDEC industry standard classifications, and peak solder temperature.
(4) There may be additional marking, which relates to the logo, the lot trace code information, or the environmental category on the device.
(5) Multiple Device Markings will be inside parentheses. Only one Device Marking contained in parentheses and separated by a "~" will appear on a device. If a line is indented then it is a continuation of the previous line and the two combined represent the entire Device Marking for that device.
(6) Lead finish/Ball material - Orderable Devices may have multiple material finish options. Finish options are separated by a vertical ruled line. Lead finish/Ball material values may wrap to two lines if the finish value exceeds the maximum column width.# Device Marking Instructions
nuation
of the previous line and the two combined represent the entire Device Marking for that device.

# Material Details
(6) Lead finish/Ball material - Orderable Devices may have multiple material finish options. Finish options are separated by a vertical ruled line. Lead finish/Ball material values may wrap to two lines if the finish value exceeds the maximum column width.

# Important Information and Disclaimer
The information provided on this page represents TI's knowledge and belief as of the date that it is provided. TI bases its knowledge and belief on information provided by third parties, and makes no representation or warranty as to the accuracy of such information. Efforts are underway to better integrate information from third parties. TI has taken and continues to take reasonable steps to provide representative and accurate information but may not have conducted destructive testing or chemical analysis on incoming materials and chemicals.

# Proprietary Information Notice
TI and TI suppliers consider certain information to be proprietary, and thus CAS numbers and other limited information may not be available for release.

# Liability Clause
In no event shall TI's liability arising out of such information exceed the total purchase price of the TI part(s) at issue in this document sold by TI to Customer on an annual basis.
---table begin---
Table title: PLASTIC QUAD FLATPACK - NO LEAD Measurements
|   |  |
|---|---|
| 6.1 | 5.9 |
| 6.1 | 5.9 |
| 1.0 | 0.8 |
| 0.05 | 0.00 |
---table end---

# Notes on Design and Soldering
1. All linear dimensions are in millimeters. Any dimensions in parenthesis are for reference only. Dimensioning and tolerancing per ASME Y14.5M.
2. This drawing is subject to change without notice.
3. The package thermal pad must be soldered to the printed circuit board for thermal and mechanical performance.
---table begin---
Table title: Suspected Table from Text 
|   |   |
|---|---|
| 1 | 9 |
| 10 | 18 |
| 19 | 27 |
| 28 | 36 |
| 37 | A |
| B | C |
---table end---

# Additional Notes
4. This package is designed to be soldered to a thermal pad on the board. For more information, see Texas Instruments literature number SLUA271 (www.ti.com/lit/slua271).
5. Vias are optional depending on application, refer to device data sheet. If any vias are implemented, refer to their locations shown on this view. It is recommended that vias under paste be filled, plugged or tented.

# Final Notes
6. Laser cutting apertures with trapezoidal walls and rounded corners may offer better paste release. IPC-7525 may have alternate design recommendations.

# Solder Paste Example Guidance
SOLDER PASTE EXAMPLE BASED ON 0.125 MM THICK STENCIL SCALE: 15X EXPOSED PAD 37 70% PRINTED SOLDER COVERAGE BY AREA UNDER PACKAGE
---table begin---
Table title: Suspected Table from Text - Final 
|   |   |
|---|---|
| 1 | 9 |
| 10 | 18 |
| 19 | 27 |
| 28 | 36 |
| 37 |  |
---table end---# TAILS
36X (0.75)
36X (0.24)
32X (0.5)
(5.65)
(5.65)
16X (
0.92)
(R0.05) TYP
(0.56) TYP
(1.12) TYP
(0.56)
TYP
(1.12)
TYP
PLASTIC QUAD FLATPACK - NO LEAD
4225412/A   10/2019

# NOTES: (continued)
Laser cutting apertures with trapezoidal walls and rounded corners may offer better paste release. IPC-7525 may have alternate
design recommendations. 

